![테이블들](https://i.ibb.co/tmRVrVS/Screenshot-2024-10-04-at-4-08-50-AM.png)


# 📚 Course Registration System ERD

## Overview

이 시스템은 학생들이 강의를 등록하고, 강의에 대한 상세 정보를 확인할 수 있도록 설계되었습니다. 강의 등록 시에는 등록 제한 인원(30명)이 있으며, 동일한 사용자가 여러 번 동일한 강의에 신청할 수 없도록 제약을 둔 구조입니다. 주요 테이블로는 `users`, `courses`, `course_apply_histories`가 있으며, 이를 통해 학생과 강의, 그리고 강의 등록 이력을 관리합니다.

## ERD (Entity Relationship Diagram)

```plaintext
+-----------------+      +--------------------+      +----------------------------+
|     users       |      |       courses       |      |    course_apply_histories   |
+-----------------+      +--------------------+      +----------------------------+
| id (PK)         |      | id (PK)             |      | id (PK)                    |
| name            |      | title               |      | user_id (FK) -> users.id   |
+-----------------+      | description         |      | course_id (FK) -> courses.id|
                         | maxParticipants     |      | registrationDatetime       |
                         | startAt             |      +----------------------------+
                         | endAt               |
                         | createdAt           |
                         | updatedAt           |
                         +--------------------+

## 테이블 설명

### 1. `users` 테이블

- **설명**: 이 테이블은 강의를 신청하는 사용자 정보를 저장합니다. 사용자의 `id`와 `name` 필드를 포함하고 있습니다.
- **주요 필드**:
  - `id`: 사용자 고유 식별자(PK).
  - `name`: 사용자 이름.
  
- **설계 이유**: 학생을 나타내는 개체로, 각 사용자는 시스템 내에서 고유하며, 이를 바탕으로 강의 신청 이력을 관리하기 위해 필요합니다.

---

### 2. `courses` 테이블

- **설명**: 이 테이블은 시스템에 등록된 강의 정보를 저장합니다. 강의의 제목, 설명, 최대 수강 인원, 시작 및 종료 일자 등 강의에 대한 세부 정보를 포함하고 있습니다.
- **주요 필드**:
  - `id`: 강의 고유 식별자(PK).
  - `title`: 강의 제목.
  - `description`: 강의 설명.
  - `maxParticipants`: 강의 최대 참가자 수. 기본 값은 30명으로 설정되어 있으며, 이를 통해 강의 등록을 제한할 수 있습니다.
  - `startAt`, `endAt`: 강의 시작 및 종료 일자. 이를 통해 강의 진행 일정을 관리합니다.
  - `createdAt`, `updatedAt`: 강의가 생성된 시간 및 마지막으로 업데이트된 시간.
  
- **설계 이유**: 각 강의는 고유하며, 이를 통해 학생들이 신청할 수 있는 강의를 구분하고 관리할 수 있습니다. `maxParticipants` 필드를 통해 등록 가능 인원을 제한하고, 강의 시작 및 종료 시간을 통해 등록 기간을 관리합니다. Redis를 사용하여 강의 신청 횟수를 관리하고, Redis를 통과했어도 강의 신청 횟수가 초과되면 신청이 실패하도록 설계되었습니다.

---

### 3. `course_apply_histories` 테이블

- **설명**: 이 테이블은 학생들이 강의에 신청한 이력을 저장합니다. 학생과 강의 간의 다대다 관계를 관리하며, 한 학생이 동일한 강의에 여러 번 신청할 수 없도록 제약을 두었습니다.
- **주요 필드**:
  - `id`: 강의 신청 이력 고유 식별자(PK).
  - `user_id`: 신청한 사용자(`users.id`를 참조하는 FK).
  - `course_id`: 신청한 강의(`courses.id`를 참조하는 FK).
  - `registrationDatetime`: 신청 일시.
  
- **설계 이유**: 이 테이블은 학생이 특정 강의에 몇 시에 신청했는지에 대한 이력을 기록하며, `Unique(['user', 'course'])` 제약을 통해 동일 사용자가 같은 강의에 중복 신청하는 것을 방지합니다. 이를 통해 공정한 신청 환경을 구축할 수 있습니다.
